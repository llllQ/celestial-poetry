<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content"width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Celestial Poetry Site</title>
    <link rel="stylesheet" href="https://use.typekit.net/rhq0hoi.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="shortcut icon" href="./assets/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="./assets/favicon.ico" type="image/x-icon" />
    <meta
      name="description"
      content="Celestial Poetry Site is a three.js art project created by Matt Penlington aiming to provide a quirky way to connect during quarantine through a platform of poems. Users navigate a star system where each star represents a user submitted poem, discovering literature put out into space by other, anonymous users."
    />
  </head>
  <body>
    <div class="loading open">
      <div class="loading-anim">
        <svg
          class="planet"
          data-name="Layer 1"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 119 119"
        >
          <defs>
            <style>
              .cls-1 {
                fill: none;
                stroke: azure;
                stroke-miterlimit: 10;
              }
            </style>
          </defs>
          <circle class="cls-1" cx="59.5" cy="59.5" r="59" />
        </svg>
        <svg
          class="orbit"
          data-name="Layer 1"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 141.56 119"
        >
          <defs>
            <style>
              .cls-1 {
                stroke: azure;
                stroke-miterlimit: 10;
              }
            </style>
          </defs>
          <circle class="cls-1" cx="70.75" cy="59.5" r="59" />
          <circle class="cls-2" cx="129.81" cy="59.75" r="11.75" />
          <!-- <circle class="cls-2" cx="11.75" cy="59.75" r="11.75" /> -->
          <circle class="cls-1" cx="130.13" cy="60.02" r="6.52" />
        </svg>
        <svg
          class="orbit"
          data-name="Layer 1"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 141.56 119"
        >
          <defs>
            <style>
              .cls-1 {
                stroke: azure;
                stroke-miterlimit: 10;
              }
            </style>
          </defs>
          <circle class="cls-1" cx="70.75" cy="59.5" r="59" />
          <circle class="cls-2" cx="129.81" cy="59.75" r="11.75" />
          <!-- <circle class="cls-2" cx="11.75" cy="59.75" r="11.75" /> -->
          <circle class="cls-1" cx="130.13" cy="60.02" r="6.52" />
        </svg>
      </div>
      <h1>Stargazing...</h1>
    </div>
    <div id="canvas"></div>

    <div class="navigation">
      <div class="hamburger nav-icon">
        <!-- <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 20">
          <path
            d="M22,6H2A2,2,0,0,1,0,4H0A2,2,0,0,1,2,2H22a2,2,0,0,1,2,2h0A2,2,0,0,1,22,6Zm0,4H2a2,2,0,0,0-2,2H0a2,2,0,0,0,2,2H22a2,2,0,0,0,2-2h0A2,2,0,0,0,22,10Zm0,8H2a2,2,0,0,0-2,2H0a2,2,0,0,0,2,2H22a2,2,0,0,0,2-2h0A2,2,0,0,0,22,18Z"
            transform="translate(0 -2)"
          />
        </svg> -->
        <i></i>
        <i></i>
        <i></i>
      </div>
      <div class="create nav-icon">
        <?xml version="1.0" encoding="iso-8859-1"?>
        <!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg
          version="1.1"
          id="Capa_1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          x="0px"
          y="0px"
          viewBox="0 0 512 512"
          style="enable-background: new 0 0 512 512;"
          xml:space="preserve"
        >
          <g>
            <path
              d="M492,236H276V20c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20v216H20c-11.046,0-20,8.954-20,20s8.954,20,20,20h216
			v216c0,11.046,8.954,20,20,20s20-8.954,20-20V276h216c11.046,0,20-8.954,20-20C512,244.954,503.046,236,492,236z"
            />
          </g>
        </svg>
      </div>
      <div class="view nav-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M12.015 7c4.751 0 8.063 3.012 9.504 4.636-1.401 1.837-4.713 5.364-9.504 5.364-4.42 0-7.93-3.536-9.478-5.407 1.493-1.647 4.817-4.593 9.478-4.593zm0-2c-7.569 0-12.015 6.551-12.015 6.551s4.835 7.449 12.015 7.449c7.733 0 11.985-7.449 11.985-7.449s-4.291-6.551-11.985-6.551zm-.015 3c-2.21 0-4 1.791-4 4s1.79 4 4 4c2.209 0 4-1.791 4-4s-1.791-4-4-4zm-.004 3.999c-.564.564-1.479.564-2.044 0s-.565-1.48 0-2.044c.564-.564 1.479-.564 2.044 0s.565 1.479 0 2.044z"
          />
        </svg>
      </div>
      <div class="info nav-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 5.45 12.18">
          <path
            d="M10,16c.56-1.79,1.63-3.93,1.82-4.47.27-.79-.21-1.14-1.74.2l-.34-.64c1.74-1.89,5.33-2.32,4.11.62-.76,1.83-1.31,3.07-1.62,4-.46,1.39.69.83,1.82-.21.15.25.2.33.36.62C11.88,18.53,9.1,18.74,10,16Zm4.74-8.17a1.3,1.3,0,0,1-1.76,0,1.14,1.14,0,0,1,.16-1.66,1.3,1.3,0,0,1,1.76,0A1.14,1.14,0,0,1,14.71,7.84Z"
            transform="translate(-9.71 -5.83)"
          />
        </svg>
      </div>
    </div>

    <div class="frosted-panel">
      <div class="info-container">
        <h1>
          Celestial Poetry
        </h1>
        <p>
          Conceived during the Coronavirus quarantine in 2020 and inspired by
          <span class="bold"
            ><a target="_blank" rel="noopener" href="https://paperplanes.world"
              >paperplanes</a
            ></span
          >, we wanted to show that people can still connect and inspire each
          other regardless of us being socially distant.
        </p>
        <p>
          <!-- This project depicts a planet with hundreds of stars in its' orbit. Each
            star represents a poem submitted by an anonymous user. A visitor to this
            system can use their desktop device to see the contributions from afar,
            but also navigate to this system on their phones to read and submit
            individual stars using gestures. -->
          This project is in its' early stages but we plan for it to depict a
          planet with hundreds of stars in its' orbit. Each star will represent
          a poem submitted by an anonymous user. A visitor to this system can
          use their desktop device to see the wider picture of the contributions
          from afar, but can also navigate to this system on their phones to
          read and submit individual stars using gestures.
        </p>
        <p>
          This was a chance for us to create something artistic using
          <span class="bold"
            ><a target="_blank" rel="noopener" href="https://threejs.org"
              >three.js</a
            ></span
          >
          - a 3D JavaScript framework and Google's
          <span class="bold">
            <a
              target="_blank"
              rel="noopener"
              href="https://firebase.google.com/products"
              >Cloud Firestore</a
            >
          </span>
          - a new realtime database system, new technologies to us during our
          time unable to work in our professional careers.
        </p>
        <p>
          Project conceived and created by
          <span class="bold">
            <a
              target="_blank"
              rel="noopener"
              href="https://mattpenlington.co.uk"
              >Matt Penlington</a
            >
          </span>
          and
          <span class="bold">
            <a
              target="_blank"
              rel="noopener"
              href="https://github.com/SamKennard1"
              >Sam Kennard</a
            ></span
          >
          .
        </p>
        <div class="buttons">
          <div class="info-return return">
            <?xml version="1.0" encoding="iso-8859-1"?>
            <!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
            <svg
              version="1.1"
              id="Layer_1"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              x="0px"
              y="0px"
              viewBox="0 0 512.011 512.011"
              style="enable-background: new 0 0 512.011 512.011;"
              xml:space="preserve"
            >
              <g>
                <path
                  d="M505.755,123.592c-8.341-8.341-21.824-8.341-30.165,0L256.005,343.176L36.421,123.592c-8.341-8.341-21.824-8.341-30.165,0
			    s-8.341,21.824,0,30.165l234.667,234.667c4.16,4.16,9.621,6.251,15.083,6.251c5.462,0,10.923-2.091,15.083-6.251l234.667-234.667
			      C514.096,145.416,514.096,131.933,505.755,123.592z"
                />
              </g>
            </svg>
          </div>
        </div>
      </div>
      <div class="create-container">
        <!-- <form action=""> -->
        <h1>Create a Star</h1>
        <div class="form-title">
          <h2>Poem</h2>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 5.45 12.18">
            <path
              d="M10,16c.56-1.79,1.63-3.93,1.82-4.47.27-.79-.21-1.14-1.74.2l-.34-.64c1.74-1.89,5.33-2.32,4.11.62-.76,1.83-1.31,3.07-1.62,4-.46,1.39.69.83,1.82-.21.15.25.2.33.36.62C11.88,18.53,9.1,18.74,10,16Zm4.74-8.17a1.3,1.3,0,0,1-1.76,0,1.14,1.14,0,0,1,.16-1.66,1.3,1.3,0,0,1,1.76,0A1.14,1.14,0,0,1,14.71,7.84Z"
              transform="translate(-9.71 -5.83)"
            />
          </svg>
        </div>
        <textarea
          name="poem-text"
          id="poem-text"
          class="poem-text"
          required
        ></textarea>
        <div class="form-title">
          <h2>Mood</h2>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 5.45 12.18">
            <path
              d="M10,16c.56-1.79,1.63-3.93,1.82-4.47.27-.79-.21-1.14-1.74.2l-.34-.64c1.74-1.89,5.33-2.32,4.11.62-.76,1.83-1.31,3.07-1.62,4-.46,1.39.69.83,1.82-.21.15.25.2.33.36.62C11.88,18.53,9.1,18.74,10,16Zm4.74-8.17a1.3,1.3,0,0,1-1.76,0,1.14,1.14,0,0,1,.16-1.66,1.3,1.3,0,0,1,1.76,0A1.14,1.14,0,0,1,14.71,7.84Z"
              transform="translate(-9.71 -5.83)"
            />
          </svg>
        </div>
        <div class="mood-select">
          <!--RADIO 1-->
          <input
            type="radio"
            class="radio_item"
            value="U+1F600"
            name="mood-radio"
            id="radio1"
          />
          <label class="label_item" for="radio1">
            😀
          </label>

          <!--RADIO 2-->
          <input
            type="radio"
            class="radio_item"
            value="U+1F622"
            name="mood-radio"
            id="radio2"
          />
          <label class="label_item" for="radio2">
            😢
          </label>

          <!--RADIO 3-->
          <input
            type="radio"
            class="radio_item"
            value="U+1F914"
            name="mood-radio"
            id="radio3"
            checked="true"
          />
          <label class="label_item" for="radio3">
            🤔
          </label>

          <!--RADIO 4-->
          <input
            type="radio"
            class="radio_item"
            value="U+1F4AA"
            name="mood-radio"
            id="radio4"
          />
          <label class="label_item" for="radio4">
            💪
          </label>

          <!--RADIO 5-->
          <input
            type="radio"
            class="radio_item"
            value="U+1F496"
            name="mood-radio"
            id="radio5"
          />
          <label class="label_item" for="radio5">
            💖
          </label>
        </div>
        <div class="buttons">
          <!-- <input type="submit" value="submit" /> -->
          <div class="create-submit return">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 479 447.16">
              <defs></defs>
              <path
                d="M45.47,365.87,93.38,318a8,8,0,1,0-11.29-11.29L34.18,354.58a8,8,0,0,0,11.29,11.29Z"
                transform="translate(0 -16.87)"
              />
              <path
                d="M217.84,170.93,106.05,282.72A8,8,0,0,0,117.34,294L229.13,182.22a8,8,0,1,0-11.29-11.29Z"
                transform="translate(0 -16.87)"
              />
              <path
                d="M125.32,373.86,173.23,326a8,8,0,1,0-11.29-11.29L114,362.57a8,8,0,0,0,11.29,11.29Z"
                transform="translate(0 -16.87)"
              />
              <path
                d="M197.19,302,309,190.21a8,8,0,1,0-11.3-11.3L185.9,290.7A8,8,0,0,0,197.19,302Z"
                transform="translate(0 -16.87)"
              />
              <path
                d="M278.26,141.34,340.37,150l27.72,54.14a8.31,8.31,0,0,0,14.21,0L410,150l62.1-8.69a8,8,0,0,0,4.36-13.73L431.72,85.55l10.55-59.29a8,8,0,0,0-11.47-8.52L375.19,45.91,319.58,17.74a8,8,0,0,0-11.46,8.52l10.55,59.29-44.76,42a8,8,0,0,0,4.35,13.73Zm54.5-47.11A8,8,0,0,0,335.15,87l-8.5-47.81L371.58,62a7.92,7.92,0,0,0,7.19,0l45-22.77L415.24,87a8,8,0,0,0,2.4,7.19l35.76,33.64-49.71,7a8,8,0,0,0-6,4.26L375.19,183l-22.5-43.92a8,8,0,0,0-6-4.26l-49.7-7Z"
                transform="translate(0 -16.87)"
              />
              <path
                d="M13.53,318l207.61-207.6a8,8,0,1,0-11.29-11.3L2.24,306.67A8,8,0,0,0,13.53,318Z"
                transform="translate(0 -16.87)"
              />
              <path
                d="M106.05,461.69a8,8,0,0,0,11.29,0L325,254.08a8,8,0,1,0-11.3-11.29L106.05,450.4A8,8,0,0,0,106.05,461.69Z"
                transform="translate(0 -16.87)"
              />
            </svg>
          </div>
          <div class="create-return return">
            <?xml version="1.0" encoding="iso-8859-1"?>
            <!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
            <svg
              version="1.1"
              id="Layer_1"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              x="0px"
              y="0px"
              viewBox="0 0 512.011 512.011"
              style="enable-background: new 0 0 512.011 512.011;"
              xml:space="preserve"
            >
              <g>
                <path
                  d="M505.755,123.592c-8.341-8.341-21.824-8.341-30.165,0L256.005,343.176L36.421,123.592c-8.341-8.341-21.824-8.341-30.165,0
            s-8.341,21.824,0,30.165l234.667,234.667c4.16,4.16,9.621,6.251,15.083,6.251c5.462,0,10.923-2.091,15.083-6.251l234.667-234.667
              C514.096,145.416,514.096,131.933,505.755,123.592z"
                />
              </g>
            </svg>
          </div>
        </div>
        <!-- </form> -->
      </div>
      <!-- wont be needed to be in this, just using as placeholder - will be animate pan the camera 180deg around, add a moonlander and add a shake phone icon -->
      <div class="view-container">
        <p>
          nothing here yet
        </p>
        <div class="buttons">
          <div class="view-return return">
            <?xml version="1.0" encoding="iso-8859-1"?>
            <svg
              version="1.1"
              id="Layer_1"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              x="0px"
              y="0px"
              viewBox="0 0 512.011 512.011"
              style="enable-background: new 0 0 512.011 512.011;"
              xml:space="preserve"
            >
              <g>
                <path
                  d="M505.755,123.592c-8.341-8.341-21.824-8.341-30.165,0L256.005,343.176L36.421,123.592c-8.341-8.341-21.824-8.341-30.165,0
			    s-8.341,21.824,0,30.165l234.667,234.667c4.16,4.16,9.621,6.251,15.083,6.251c5.462,0,10.923-2.091,15.083-6.251l234.667-234.667
			      C514.096,145.416,514.096,131.933,505.755,123.592z"
                />
              </g>
            </svg>
          </div>
        </div>
      </div>
    </div>
    <script src="./scripts/open-info.js"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.14.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.3/firebase-firestore.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.14.3/firebase-analytics.js"></script>

    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyDaCAP3K40UE90sPHBJ4X-3n3aeUOVMFCY",
        authDomain: "celestial-poem.firebaseapp.com",
        databaseURL: "https://celestial-poem.firebaseio.com",
        projectId: "celestial-poem",
        storageBucket: "celestial-poem.appspot.com",
        messagingSenderId: "240776602288",
        appId: "1:240776602288:web:575408a9a95f6cc22b9175",
        measurementId: "G-CZGDTY4088",
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
      const db = firebase.firestore();
    </script>

    <script src="js/three.js"></script>
    <!-- <script src="js/controls/DeviceOrientationControls.js"></script> -->
    <script src="./js/controls/OrbitControls.js"></script>
    <script>
      let camera, scene, renderer, controls;
      let poems = [];
      var mouse = new THREE.Vector2(),
        INTERSECTED;
      // window.onload = function () {
      //   init();
      //   animate();
      // };
      db.collection("poems")
        .orderBy("clicks")
        .get()
        .then((snapshot) => {
          snapshot.docs.forEach((doc) => {
            poems.push(doc.data());
          });
          init();
          animate();
        });
      // db.collection("poems").onSnapshot((snapshot) => {
      //   let changes = snapshot.docChanges();
      //   changes.forEach((change) => {
      //     if (change.type == "added") {
      //       poems.push(change.doc);
      //     }
      //   });
      // });
      // init();
      // animate();

      function getRandomArbitrary(min, max) {
        return Math.random() * (max - min) + min;
      }

      function normalize(val, max, min) {
        return (val - min) / (max - min);
      }

      function removeLoadingScreen() {
        let loading = document.querySelector(".loading");
        loading.classList.toggle("open");
      }

      function init() {
        // init scene
        scene = new THREE.Scene();

        // init and setup camera
        camera = new THREE.PerspectiveCamera(
          100,
          window.innerWidth / window.innerHeight,
          1,
          1200
        );
        camera.position.z = 500;
        scene.add(camera);

        // init shapes
        circle = new THREE.Object3D();
        particle = new THREE.Group();

        scene.add(circle);
        scene.add(particle);

        var starGeom = new THREE.TetrahedronGeometry(2, 0);
        // var starGeom = new THREE.OctahedronGeometry(2, 0);
        var planetGeom = new THREE.IcosahedronGeometry(7, 1);
        var orbitalGeom = new THREE.IcosahedronGeometry(15, 1);

        // // Stars positioning
        // // for loop for number of stars, change to be number of poems in db.
        // for (var i = 0; i < 800; i++) {
        //   const color = new THREE.Color(1, Math.random(), Math.random());
        //   var mesh = new THREE.Mesh(starGeom, starMaterial);
        //   let scaleVal = getRandomArbitrary(0.5, 3.0);

        //   //Material Mesh Init
        //   // MeshPhongMaterial
        //   var starMaterial = new THREE.MeshLambertMaterial({
        //     color: 0xffffff,
        //     emissive: color,
        //     flatShading: true,
        //     emissiveIntensity: 0.4,
        //     // emissiveIntensity: Math.random(),
        //     // vertexColors: true,
        //   });

        //   // Set position of mesh on xyz planes between -0.5 and 0.5
        //   mesh.position
        //     .set(Math.random() - 0.5, Math.random() - 0.5, Math.random() - 0.5)
        //     .normalize();

        //   // set position scale of mesh by multiplying just defined position by a scalar
        //   // scalar calculated as 300 + random float between 0 and 1 * scale value
        //   // 300 represents the deadzone where no stars will spawn. as planet radius is 7*25= 175, no stars should spawn before at least 175. 300 is stylistic
        //   mesh.position.multiplyScalar(300 + Math.random() * 600);
        //   mesh.rotation.set(
        //     Math.random() * 2,
        //     Math.random() * 2,
        //     Math.random() * 2
        //   );
        //   // Set size of mesh by adjusting the mesh's scale by a random number between 0.5 and 3
        //   mesh.scale.set(scaleVal, scaleVal, scaleVal);

        //   // Add Mesh to 3js Object3D object
        //   particle.add(mesh);
        // }

        // Create a star for each poem
        if (poems.length !== 0) {
          poems.forEach((star) => {
            const color = new THREE.Color(1, Math.random(), Math.random());
            // Set scale based on number of clicks for the poem, between 1 and 4
            let scaleVal =
              normalize(
                star.clicks,
                poems[poems.length - 1].clicks,
                poems[0].clicks
              ) *
                5 +
              2;
            console.log("Scaled Value = " + scaleVal);

            // let scaleVal = getRandomArbitrary(0.5, 3.0);

            //Material Mesh Init
            // MeshPhongMaterial
            var starMaterial = new THREE.MeshLambertMaterial({
              color: 0xffffff,
              emissive: color,
              flatShading: true,
              emissiveIntensity: 0.4,
              // emissiveIntensity: Math.random(),
              // vertexColors: true,
            });

            var mesh = new THREE.Mesh(starGeom, starMaterial);

            // Set position of mesh on xyz planes between -0.5 and 0.5
            mesh.position
              .set(
                Math.random() - 0.5,
                Math.random() - 0.5,
                Math.random() - 0.5
              )
              .normalize();

            // set position scale of mesh by multiplying just defined position by a scalar
            // scalar calculated as 300 + random float between 0 and 1 * scale value
            // 300 represents the deadzone where no stars will spawn. as planet radius is 7*25= 175, no stars should spawn before at least 175. 300 is stylistic
            mesh.position.multiplyScalar(300 + Math.random() * 200);
            mesh.rotation.set(
              Math.random() * 2,
              Math.random() * 2,
              Math.random() * 2
            );
            // Set size of mesh by adjusting the mesh's scale by a random number between 0.5 and 3
            mesh.scale.set(scaleVal, scaleVal, scaleVal);

            // Add Mesh to 3js Object3D object
            particle.add(mesh);
          });
        } else {
          console.log("no stars");
        }

        var planetMaterial = new THREE.MeshPhongMaterial({
          color: 0x00dbe3,
          flatShading: true,
        });

        // Planet Geometry
        var planet = new THREE.Mesh(planetGeom, planetMaterial);
        planet.scale.x = planet.scale.y = planet.scale.z = 25;

        let continents = [];
        let continentClr = [
          0x00d103,
          0x007502,
          0xe6de77,
          0xd4fdff,
          0x1da608,
          0x16823c,
        ];
        for (var i = 0; i < 35; i++) {
          let scale = getRandomArbitrary(19, 20);
          let offset;
          let clr = Math.floor(getRandomArbitrary(0, 5));
          let landmassMat = new THREE.MeshPhongMaterial({
            color: continentClr[clr],
            flatShading: true,
          });
          continents[i] = new THREE.Mesh(planetGeom, landmassMat);
          continents[i].scale.x = continents[i].scale.y = continents[
            i
          ].scale.z = scale;
          continents[i].position
            .set(Math.random() - 0.5, Math.random() - 0.5, Math.random() - 0.5)
            .normalize();

          continents[i].position.multiplyScalar(Math.floor(Math.random() * 50));
          circle.add(continents[i]);
        }

        circle.add(planet);

        var ambientLight = new THREE.AmbientLight(0xffffff);
        // scene.add(ambientLight);

        var lights = [];
        // red Light rhs
        // lights[0] = new THREE.DirectionalLight(0xbd1542, 1);
        lights[0] = new THREE.DirectionalLight(0xffffff, 0.5);
        lights[0].position.set(1, 0, 0);

        // Green Light top down
        lights[1] = new THREE.DirectionalLight(0xffffff, 0.7);
        // lights[1] = new THREE.DirectionalLight(0x11e8bb, 1);
        lights[1].position.set(0.75, 1, 0.5);

        // pink light bottom up
        lights[2] = new THREE.DirectionalLight(0xffc60a, 0.25);
        // lights[2] = new THREE.DirectionalLight(0x8200c9, 0.5);
        lights[2].position.set(-0.75, -1, 0.5);
        scene.add(lights[0]);
        scene.add(lights[1]);
        scene.add(lights[2]);

        // document setup

        raycaster = new THREE.Raycaster();

        renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        // renderer.setPixelRatio(
        //   window.devicePixelRatio ? window.devicePixelRatio : 1
        // );
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.autoClear = false;
        renderer.setClearColor(0x000000, 0.0);

        // setup controls

        // controls = new THREE.DeviceOrientationControls(
        //   camera,
        //   renderer.domElement
        // );

        controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enablePan = false;
        // Prevent dollying into the planet or outside the render distance for the planet
        controls.minDistance = 300;
        controls.maxDistance = 1000;

        document.getElementById("canvas").appendChild(renderer.domElement);
        removeLoadingScreen();
        document.addEventListener("mousemove", onMouseMove, false);
        window.addEventListener("resize", onWindowResize, false);
      }

      // recenter camera and renderer on resize
      function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      }

      function onMouseMove(event) {
        event.preventDefault();
        mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
        mouse.y = (event.clientY / window.innerHeight) * 2 + 1;
        // console.log(mouse.x);
      }

      function animate() {
        requestAnimationFrame(animate);
        // raycaster.setFromCamera(mouse, camera);
        particle.rotation.x += 0.0;
        particle.rotation.y -= 0.0008;
        circle.rotation.x -= 0.0012;
        circle.rotation.y -= 0.0014;

        render();
      }

      function render() {
        // find intersections

        // raycaster.setFromCamera(mouse, camera);

        // var intersects = raycaster.intersectObjects(scene.children[2].children);
        // console.log(intersects.length);

        // if (intersects.length > 0) {
        //   if (INTERSECTED != intersects[0].object) {
        //     if (INTERSECTED)
        //       // INTERSECTED.material.emissive.setHex(INTERSECTED.currentHex);
        //       INTERSECTED = intersects[0].object;
        //     console.log("Intersected Object: ");
        //     console.log(INTERSECTED);

        //     // INTERSECTED.currentHex = INTERSECTED.material.emissive.getHex();
        //     // INTERSECTED.material.emissive.setHex(0xff0000);
        //   } else {
        //     if (INTERSECTED)
        //       // INTERSECTED.material.emissive.setHex(INTERSECTED.currentHex);
        //       INTERSECTED = null;
        //   }
        // }
        // renderer.clear();

        controls.update();
        renderer.render(scene, camera);
      }
    </script>
    <script src="./scripts/submit-star.js"></script>
  </body>
</html>
